@model WebsiteBanHangOnline.Models.Account
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!---page Title --->
<section class="bg-img pt-150 pb-20" data-overlay="7" style="background-image: url(/Content/images/front-end-img/background/bg-8.jpg);">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="text-center">
                    <h2 class="page-title text-white">Register & Login</h2>
                    <ol class="breadcrumb bg-transparent justify-content-center">
                        <li class="breadcrumb-item"><a href="#" class="text-white-50"><i class="mdi mdi-home-outline"></i></a></li>
                        <li class="breadcrumb-item text-white active" aria-current="page">Register & Login</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<!--Page content -->

<section class="py-50">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-12">
                <div class="box box-body">
                    <ul class="nav nav-tabs nav-fill" role="tablist">
                        <li class="nav-item"> <a class="nav-link active py-10 rounded" data-toggle="tab" href="#login" role="tab">Login</a> </li>
                        <li class="nav-item"> <a class="nav-link py-10 rounded" data-toggle="tab" href="#register" role="tab">Register</a> </li>
                    </ul>
                </div>
                <div class="box box-body mb-0">
                    <div class="tab-content">
                        <div class="tab-pane active" id="login" role="tabpanel">
                            <div>
                                <div class="content-top-agile pb-0 pt-20">
                                    <h2 class="text-primary">Let's Get Started</h2>
                                    <p class="mb-0">Sign in to continue to EduAdmin.</p>
                                </div>
                                <div class="p-40">
                                    @using (Html.BeginForm("Index", "Login", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {
                                        @Html.AntiForgeryToken();
                                        @Html.ValidationSummary(true, "", new { @class = "" })
                                        <div class="form-group">
                                            <div class="input-group mb-15">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text bg-transparent"><i class="ti-user"></i></span>
                                                </div>
                                                @Html.TextBoxFor(model => model.AccountName, new { @class = "form-control pl-15 bg-transparent", placeholder = "UserName" })
                                                @Html.ValidationMessageFor(model => model.AccountName, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group mb-15">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text  bg-transparent"><i class="ti-lock"></i></span>
                                                </div>
                                                @Html.PasswordFor(model => model.Password, new { @class = "form-control pl-15 bg-transparent", placeholder = "Password" })
                                                @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="checkbox ml-5">
                                                    <input type="checkbox" id="basic_checkbox_1">
                                                    <label for="basic_checkbox_1">Remember Me</label>
                                                </div>
                                            </div>
                                            <!-- /.col -->
                                            <div class="col-6">
                                                <div class="fog-pwd text-right">
                                                    <a href="javascript:void(0)" class="hover-warning"><i class="ion ion-locked"></i> Forgot pwd?</a><br>
                                                </div>
                                            </div>
                                            <!-- /.col -->
                                            <div class="col-12 text-center">
                                                <button type="submit" class="btn btn-info btn-block mt-15">SIGN IN</button>
                                            </div>
                                            <!-- /.col -->
                                        </div>
                                    }


                                    <div class="text-center">
                                        <p class="mt-15 mb-0">Don't have an account? <a href="register.html" class="text-warning ml-5">Register</a></p>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <p>- Login With -</p>
                                    <p class="d-flex gap-items-2 mb-20 justify-content-center">
                                        <a class="btn btn-social-icon btn-round btn-facebook" href="@Url.Action("Facebook","Login",null)"><i class="fa fa-facebook"></i></a>
                                        <a id="googleplus1" class="btn btn-social-icon btn-round btn-google" href="#"><i class="fa fa-google-plus"></i></a>
                                        <a class="btn btn-social-icon btn-round btn-instagram" href="#"><i class="fa fa-instagram"></i></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="register" role="tabpanel">
                            <div>
                                <div class="content-top-agile pb-0 pt-20">
                                    <h2 class="text-primary">Get started with Us</h2>
                                    <p class="mb-0">Register a New Membership</p>
                                </div>
                                <div class="p-40">
                                    @using (Html.BeginForm("Register", "Login", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {@Html.AntiForgeryToken();
                                    @Html.ValidationSummary(true, "", new { @class = "" })
                                    <div class="form-group">
                                        <div class="input-group mb-15">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text bg-transparent"><i class="ti-user"></i></span>
                                            </div>
                                            <input type="text" class="form-control pl-15 bg-transparent" placeholder="Full Name">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group mb-15">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text bg-transparent"><i class="ti-email"></i></span>
                                            </div>
                                            <input type="email" class="form-control pl-15 bg-transparent" placeholder="Email">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group mb-15">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text bg-transparent"><i class="ti-lock"></i></span>
                                            </div>
                                            <input type="password" class="form-control pl-15 bg-transparent" placeholder="Password">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="input-group mb-15">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text bg-transparent"><i class="ti-lock"></i></span>
                                            </div>
                                            <input type="password" class="form-control pl-15 bg-transparent" placeholder="Retype Password">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="checkbox ml-5">
                                                <input type="checkbox" id="basic_checkbox_1">
                                                <label for="basic_checkbox_1">I agree to the <a href="#" class="text-warning"><b>Terms</b></a></label>
                                            </div>
                                        </div>
                                        <!-- /.col -->
                                        <div class="col-12 text-center">
                                            <button type="submit" class="btn btn-info btn-block mt-15">Register</button>
                                        </div>
                                        <!-- /.col -->
                                    </div>
                                }

                                    <div class="text-center">
                                        <p class="mt-15 mb-0">Already have an account?<a href="login.html" class="text-danger ml-5"> Log In</a></p>
                                    </div>
                                </div>

                                <div class="text-center">
                                    <p>- Register With -</p>
                                    <p class="d-flex gap-items-2 mb-20 justify-content-center">
                                        <a class="btn btn-social-icon btn-round btn-facebook" href="@Url.Action("Facebook","Login",null)"><i class="fa fa-facebook"></i></a>
                                        <a id="googleplus2" class="btn btn-social-icon btn-round btn-google" href="#"><i class="fa fa-google-plus"></i></a>
                                        <a class="btn btn-social-icon btn-round btn-instagram" href="#"><i class="fa fa-instagram"></i></a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section JSfooter{
    <script src="https://apis.google.com/js/api:client.js"></script>
    <script>
        var googleUser = {};
        var startAppA1 = function () {
            gapi.load('auth2', function () {
                //Retrieve the singleton for the GoogleAuth library and set up the client.
                auth2 = gapi.auth2.init({
                    client_id: '945504478960-ejkndohkf2oju7d408qi0bt1hhvct322.apps.googleusercontent.com',
                    secret_key: 'elD94u19gpX5cfUHir_CuFhn',
                    cookiepolicy: 'single_host_origin',
                });
                attachSignin(document.getElementById('googleplus1'));
            });
        };
        var startAppA2 = function () {
            gapi.load('auth2', function () {
                //Retrieve the singleton for the GoogleAuth library and set up the client.
                auth2 = gapi.auth2.init({
                    client_id: '945504478960-ejkndohkf2oju7d408qi0bt1hhvct322.apps.googleusercontent.com',
                    secret_key: 'elD94u19gpX5cfUHir_CuFhn',
                    cookiepolicy: 'single_host_origin',
                });
                attachSignin(document.getElementById('googleplus2'));
            });
        };
        function attachSignin(element) {
            auth2.attachClickHandler(element, {},
                function (googleUser) {
                    //debugger;
                    alert("x");
                    $(".se-pre-con").show();
                    console.log(googleUser);
                    var profiles = googleUser.getBasicProfile();
                    var ReturnUrl = 'https://localhost:44314/Login/Index';
                    var objData = {
                        Email: profiles.getEmail(),
                        LastName: profiles.getFamilyName(),
                        FirstName: profiles.getGivenName(),
                        GoogleID: profiles.getId(),
                        ProfileURL: profiles.getName(),
                    };

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("ReturnURL", "Login")',
                        data: objData,
                        datatype: "json",
                        success: function (data) {
                            alert("Successfully Done");
                            window.location.href = "/";
                        }
                    });
                    $(".se-pre-con").hide();

                }, function (error) {
                    //alert(JSON.stringify(error, #ff0000, 2));
                });
        }
    </script>
    <script>
        startAppA1();
        startAppA2();
    </script>

}